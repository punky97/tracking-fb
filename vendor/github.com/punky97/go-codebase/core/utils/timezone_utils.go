package utils

import (
	"fmt"
	"github.com/punky97/go-codebase/core/logger"
	"regexp"
	"strconv"
	"strings"
	"time"
)

// list timezones get from function DateTimeZone::listIdentifiers(\DateTimeZone::ALL) in PHP
var listSupportedTimezones = []string{
	"Africa/Abidjan",
	"Africa/Accra",
	"Africa/Addis_Ababa",
	"Africa/Algiers",
	"Africa/Asmara",
	"Africa/Bamako",
	"Africa/Bangui",
	"Africa/Banjul",
	"Africa/Bissau",
	"Africa/Blantyre",
	"Africa/Brazzaville",
	"Africa/Bujumbura",
	"Africa/Cairo",
	"Africa/Casablanca",
	"Africa/Ceuta",
	"Africa/Conakry",
	"Africa/Dakar",
	"Africa/Dar_es_Salaam",
	"Africa/Djibouti",
	"Africa/Douala",
	"Africa/El_Aaiun",
	"Africa/Freetown",
	"Africa/Gaborone",
	"Africa/Harare",
	"Africa/Johannesburg",
	"Africa/Juba",
	"Africa/Kampala",
	"Africa/Khartoum",
	"Africa/Kigali",
	"Africa/Kinshasa",
	"Africa/Lagos",
	"Africa/Libreville",
	"Africa/Lome",
	"Africa/Luanda",
	"Africa/Lubumbashi",
	"Africa/Lusaka",
	"Africa/Malabo",
	"Africa/Maputo",
	"Africa/Maseru",
	"Africa/Mbabane",
	"Africa/Mogadishu",
	"Africa/Monrovia",
	"Africa/Nairobi",
	"Africa/Ndjamena",
	"Africa/Niamey",
	"Africa/Nouakchott",
	"Africa/Ouagadougou",
	"Africa/Porto-Novo",
	"Africa/Sao_Tome",
	"Africa/Tripoli",
	"Africa/Tunis",
	"Africa/Windhoek",
	"America/Adak",
	"America/Anchorage",
	"America/Anguilla",
	"America/Antigua",
	"America/Araguaina",
	"America/Argentina/Buenos_Aires",
	"America/Argentina/Catamarca",
	"America/Argentina/Cordoba",
	"America/Argentina/Jujuy",
	"America/Argentina/La_Rioja",
	"America/Argentina/Mendoza",
	"America/Argentina/Rio_Gallegos",
	"America/Argentina/Salta",
	"America/Argentina/San_Juan",
	"America/Argentina/San_Luis",
	"America/Argentina/Tucuman",
	"America/Argentina/Ushuaia",
	"America/Aruba",
	"America/Asuncion",
	"America/Atikokan",
	"America/Bahia",
	"America/Bahia_Banderas",
	"America/Barbados",
	"America/Belem",
	"America/Belize",
	"America/Blanc-Sablon",
	"America/Boa_Vista",
	"America/Bogota",
	"America/Boise",
	"America/Cambridge_Bay",
	"America/Campo_Grande",
	"America/Cancun",
	"America/Caracas",
	"America/Cayenne",
	"America/Cayman",
	"America/Chicago",
	"America/Chihuahua",
	"America/Costa_Rica",
	"America/Creston",
	"America/Cuiaba",
	"America/Curacao",
	"America/Danmarkshavn",
	"America/Dawson",
	"America/Dawson_Creek",
	"America/Denver",
	"America/Detroit",
	"America/Dominica",
	"America/Edmonton",
	"America/Eirunepe",
	"America/El_Salvador",
	"America/Fort_Nelson",
	"America/Fortaleza",
	"America/Glace_Bay",
	"America/Godthab",
	"America/Goose_Bay",
	"America/Grand_Turk",
	"America/Grenada",
	"America/Guadeloupe",
	"America/Guatemala",
	"America/Guayaquil",
	"America/Guyana",
	"America/Halifax",
	"America/Havana",
	"America/Hermosillo",
	"America/Indiana/Indianapolis",
	"America/Indiana/Knox",
	"America/Indiana/Marengo",
	"America/Indiana/Petersburg",
	"America/Indiana/Tell_City",
	"America/Indiana/Vevay",
	"America/Indiana/Vincennes",
	"America/Indiana/Winamac",
	"America/Inuvik",
	"America/Iqaluit",
	"America/Jamaica",
	"America/Juneau",
	"America/Kentucky/Louisville",
	"America/Kentucky/Monticello",
	"America/Kralendijk",
	"America/La_Paz",
	"America/Lima",
	"America/Los_Angeles",
	"America/Lower_Princes",
	"America/Maceio",
	"America/Managua",
	"America/Manaus",
	"America/Marigot",
	"America/Martinique",
	"America/Matamoros",
	"America/Mazatlan",
	"America/Menominee",
	"America/Merida",
	"America/Metlakatla",
	"America/Mexico_City",
	"America/Miquelon",
	"America/Moncton",
	"America/Monterrey",
	"America/Montevideo",
	"America/Montserrat",
	"America/Nassau",
	"America/New_York",
	"America/Nipigon",
	"America/Nome",
	"America/Noronha",
	"America/North_Dakota/Beulah",
	"America/North_Dakota/Center",
	"America/North_Dakota/New_Salem",
	"America/Ojinaga",
	"America/Panama",
	"America/Pangnirtung",
	"America/Paramaribo",
	"America/Phoenix",
	"America/Port-au-Prince",
	"America/Port_of_Spain",
	"America/Porto_Velho",
	"America/Puerto_Rico",
	"America/Punta_Arenas",
	"America/Rainy_River",
	"America/Rankin_Inlet",
	"America/Recife",
	"America/Regina",
	"America/Resolute",
	"America/Rio_Branco",
	"America/Santarem",
	"America/Santa_Isabel",
	"America/Santiago",
	"America/Santo_Domingo",
	"America/Sao_Paulo",
	"America/Scoresbysund",
	"America/Sitka",
	"America/St_Barthelemy",
	"America/St_Johns",
	"America/St_Kitts",
	"America/St_Lucia",
	"America/St_Thomas",
	"America/St_Vincent",
	"America/Swift_Current",
	"America/Tegucigalpa",
	"America/Thule",
	"America/Thunder_Bay",
	"America/Tijuana",
	"America/Toronto",
	"America/Tortola",
	"America/Vancouver",
	"America/Whitehorse",
	"America/Winnipeg",
	"America/Yakutat",
	"America/Yellowknife",
	"Antarctica/Casey",
	"Antarctica/Davis",
	"Antarctica/DumontDUrville",
	"Antarctica/Macquarie",
	"Antarctica/Mawson",
	"Antarctica/McMurdo",
	"Antarctica/Palmer",
	"Antarctica/Rothera",
	"Antarctica/Syowa",
	"Antarctica/Troll",
	"Antarctica/Vostok",
	"Arctic/Longyearbyen",
	"Asia/Aden",
	"Asia/Almaty",
	"Asia/Amman",
	"Asia/Anadyr",
	"Asia/Aqtau",
	"Asia/Aqtobe",
	"Asia/Ashgabat",
	"Asia/Atyrau",
	"Asia/Baghdad",
	"Asia/Bahrain",
	"Asia/Baku",
	"Asia/Bangkok",
	"Asia/Barnaul",
	"Asia/Beirut",
	"Asia/Bishkek",
	"Asia/Brunei",
	"Asia/Chita",
	"Asia/Choibalsan",
	"Asia/Colombo",
	"Asia/Damascus",
	"Asia/Dhaka",
	"Asia/Dili",
	"Asia/Dubai",
	"Asia/Dushanbe",
	"Asia/Famagusta",
	"Asia/Gaza",
	"Asia/Hebron",
	"Asia/Ho_Chi_Minh",
	"Asia/Hong_Kong",
	"Asia/Hovd",
	"Asia/Irkutsk",
	"Asia/Jakarta",
	"Asia/Jayapura",
	"Asia/Jerusalem",
	"Asia/Kabul",
	"Asia/Kamchatka",
	"Asia/Karachi",
	"Asia/Kathmandu",
	"Asia/Khandyga",
	"Asia/Kolkata",
	"Asia/Krasnoyarsk",
	"Asia/Kuala_Lumpur",
	"Asia/Kuching",
	"Asia/Kuwait",
	"Asia/Macau",
	"Asia/Magadan",
	"Asia/Makassar",
	"Asia/Manila",
	"Asia/Muscat",
	"Asia/Nicosia",
	"Asia/Novokuznetsk",
	"Asia/Novosibirsk",
	"Asia/Omsk",
	"Asia/Oral",
	"Asia/Phnom_Penh",
	"Asia/Pontianak",
	"Asia/Pyongyang",
	"Asia/Qatar",
	"Asia/Qyzylorda",
	"Asia/Riyadh",
	"Asia/Sakhalin",
	"Asia/Samarkand",
	"Asia/Seoul",
	"Asia/Shanghai",
	"Asia/Singapore",
	"Asia/Srednekolymsk",
	"Asia/Taipei",
	"Asia/Tashkent",
	"Asia/Tbilisi",
	"Asia/Tehran",
	"Asia/Thimphu",
	"Asia/Tokyo",
	"Asia/Tomsk",
	"Asia/Ulaanbaatar",
	"Asia/Urumqi",
	"Asia/Ust-Nera",
	"Asia/Vientiane",
	"Asia/Vladivostok",
	"Asia/Yakutsk",
	"Asia/Yangon",
	"Asia/Yekaterinburg",
	"Asia/Yerevan",
	"Atlantic/Azores",
	"Atlantic/Bermuda",
	"Atlantic/Canary",
	"Atlantic/Cape_Verde",
	"Atlantic/Faroe",
	"Atlantic/Madeira",
	"Atlantic/Reykjavik",
	"Atlantic/South_Georgia",
	"Atlantic/St_Helena",
	"Atlantic/Stanley",
	"Australia/Adelaide",
	"Australia/Brisbane",
	"Australia/Broken_Hill",
	"Australia/Currie",
	"Australia/Darwin",
	"Australia/Eucla",
	"Australia/Hobart",
	"Australia/Lindeman",
	"Australia/Lord_Howe",
	"Australia/Melbourne",
	"Australia/Perth",
	"Australia/Sydney",
	"Europe/Amsterdam",
	"Europe/Andorra",
	"Europe/Astrakhan",
	"Europe/Athens",
	"Europe/Belgrade",
	"Europe/Berlin",
	"Europe/Bratislava",
	"Europe/Brussels",
	"Europe/Bucharest",
	"Europe/Budapest",
	"Europe/Busingen",
	"Europe/Chisinau",
	"Europe/Copenhagen",
	"Europe/Dublin",
	"Europe/Gibraltar",
	"Europe/Guernsey",
	"Europe/Helsinki",
	"Europe/Isle_of_Man",
	"Europe/Istanbul",
	"Europe/Jersey",
	"Europe/Kaliningrad",
	"Europe/Kiev",
	"Europe/Kirov",
	"Europe/Lisbon",
	"Europe/Ljubljana",
	"Europe/London",
	"Europe/Luxembourg",
	"Europe/Madrid",
	"Europe/Malta",
	"Europe/Mariehamn",
	"Europe/Minsk",
	"Europe/Monaco",
	"Europe/Moscow",
	"Europe/Oslo",
	"Europe/Paris",
	"Europe/Podgorica",
	"Europe/Prague",
	"Europe/Riga",
	"Europe/Rome",
	"Europe/Samara",
	"Europe/San_Marino",
	"Europe/Sarajevo",
	"Europe/Saratov",
	"Europe/Simferopol",
	"Europe/Skopje",
	"Europe/Sofia",
	"Europe/Stockholm",
	"Europe/Tallinn",
	"Europe/Tirane",
	"Europe/Ulyanovsk",
	"Europe/Uzhgorod",
	"Europe/Vaduz",
	"Europe/Vatican",
	"Europe/Vienna",
	"Europe/Vilnius",
	"Europe/Volgograd",
	"Europe/Warsaw",
	"Europe/Zagreb",
	"Europe/Zaporozhye",
	"Europe/Zurich",
	"Indian/Antananarivo",
	"Indian/Chagos",
	"Indian/Christmas",
	"Indian/Cocos",
	"Indian/Comoro",
	"Indian/Kerguelen",
	"Indian/Mahe",
	"Indian/Maldives",
	"Indian/Mauritius",
	"Indian/Mayotte",
	"Indian/Reunion",
	"Pacific/Apia",
	"Pacific/Auckland",
	"Pacific/Bougainville",
	"Pacific/Chatham",
	"Pacific/Chuuk",
	"Pacific/Easter",
	"Pacific/Efate",
	"Pacific/Enderbury",
	"Pacific/Fakaofo",
	"Pacific/Fiji",
	"Pacific/Funafuti",
	"Pacific/Galapagos",
	"Pacific/Gambier",
	"Pacific/Guadalcanal",
	"Pacific/Guam",
	"Pacific/Honolulu",
	"Pacific/Kiritimati",
	"Pacific/Kosrae",
	"Pacific/Kwajalein",
	"Pacific/Majuro",
	"Pacific/Marquesas",
	"Pacific/Midway",
	"Pacific/Nauru",
	"Pacific/Niue",
	"Pacific/Norfolk",
	"Pacific/Noumea",
	"Pacific/Pago_Pago",
	"Pacific/Palau",
	"Pacific/Pitcairn",
	"Pacific/Pohnpei",
	"Pacific/Port_Moresby",
	"Pacific/Rarotonga",
	"Pacific/Saipan",
	"Pacific/Tahiti",
	"Pacific/Tarawa",
	"Pacific/Tongatapu",
	"Pacific/Wake",
	"Pacific/Wallis",
	"UTC",
	"Etc/GMT+12",
}

var standardTimezoneOfShopify = []string{
	"Etc/GMT+12",
	"Pacific/Pago_Pago",
	"Pacific/Midway",
	"Pacific/Honolulu",
	"America/Juneau",
	"America/Los_Angeles",
	"America/Tijuana",
	"America/Phoenix",
	"America/Chihuahua",
	"America/Mazatlan",
	"America/Denver",
	"America/Guatemala",
	"America/Chicago",
	"America/Mexico_City",
	"America/Monterrey",
	"America/Regina",
	"America/Bogota",
	"America/New_York",
	"America/Indiana/Indianapolis",
	"America/Lima",
	"America/Halifax",
	"America/Caracas",
	"America/Guyana",
	"America/La_Paz",
	"America/Puerto_Rico",
	"America/Santiago",
	"America/St_Johns",
	"America/Sao_Paulo",
	"America/Argentina/Buenos_Aires",
	"America/Godthab",
	"America/Montevideo",
	"Atlantic/South_Georgia",
	"Atlantic/Azores",
	"Atlantic/Cape_Verde",
	"Africa/Casablanca",
	"Europe/Dublin",
	"Europe/London",
	"Europe/Lisbon",
	"Africa/Monrovia",
	"Etc/UTC",
	"Europe/Amsterdam",
	"Europe/Belgrade",
	"Europe/Berlin",
	"Europe/Zurich",
	"Europe/Bratislava",
	"Europe/Brussels",
	"Europe/Budapest",
	"Europe/Copenhagen",
	"Europe/Ljubljana",
	"Europe/Madrid",
	"Europe/Paris",
	"Europe/Prague",
	"Europe/Rome",
	"Europe/Sarajevo",
	"Europe/Skopje",
	"Europe/Stockholm",
	"Europe/Vienna",
	"Europe/Warsaw",
	"Africa/Algiers",
	"Europe/Zagreb",
	"Europe/Athens",
	"Europe/Bucharest",
	"Africa/Cairo",
	"Africa/Harare",
	"Europe/Helsinki",
	"Asia/Jerusalem",
	"Europe/Kaliningrad",
	"Europe/Kiev",
	"Africa/Johannesburg",
	"Europe/Riga",
	"Europe/Sofia",
	"Europe/Tallinn",
	"Europe/Vilnius",
	"Asia/Baghdad",
	"Europe/Istanbul",
	"Asia/Kuwait",
	"Europe/Minsk",
	"Europe/Moscow",
	"Africa/Nairobi",
	"Asia/Riyadh",
	"Europe/Volgograd",
	"Asia/Tehran",
	"Asia/Muscat",
	"Asia/Baku",
	"Europe/Samara",
	"Asia/Tbilisi",
	"Asia/Yerevan",
	"Asia/Kabul",
	"Asia/Yekaterinburg",
	"Asia/Karachi",
	"Asia/Tashkent",
	"Asia/Kolkata",
	"Asia/Colombo",
	"Asia/Kathmandu",
	"Asia/Almaty",
	"Asia/Dhaka",
	"Asia/Urumqi",
	"Asia/Rangoon",
	"Asia/Bangkok",
	"Asia/Jakarta",
	"Asia/Krasnoyarsk",
	"Asia/Novosibirsk",
	"Asia/Shanghai",
	"Asia/Chongqing",
	"Asia/Hong_Kong",
	"Asia/Irkutsk",
	"Asia/Kuala_Lumpur",
	"Australia/Perth",
	"Asia/Singapore",
	"Asia/Taipei",
	"Asia/Ulaanbaatar",
	"Asia/Tokyo",
	"Asia/Seoul",
	"Asia/Yakutsk",
	"Australia/Adelaide",
	"Australia/Darwin",
	"Australia/Brisbane",
	"Australia/Melbourne",
	"Pacific/Guam",
	"Australia/Hobart",
	"Pacific/Port_Moresby",
	"Australia/Sydney",
	"Asia/Vladivostok",
	"Asia/Magadan",
	"Pacific/Noumea",
	"Pacific/Guadalcanal",
	"Asia/Srednekolymsk",
	"Pacific/Auckland",
	"Pacific/Fiji",
	"Asia/Kamchatka",
	"Pacific/Majuro",
	"Pacific/Chatham",
	"Pacific/Tongatapu",
	"Pacific/Apia",
	"Pacific/Fakaofo",
}

var standardOffsetToTimezone = map[int64]string{
	-43200: "Etc/GMT+12",
	-39600: "Pacific/Apia",
	-36000: "Pacific/Honolulu",
	-32400: "America/Anchorage",
	-28800: "America/Los_Angeles",
	-25200: "America/Denver",
	-21600: "America/Chicago",
	-18000: "America/New_York",
	-16200: "America/Caracas",
	-14400: "America/Halifax",
	-10800: "America/Sao_Paulo",
	-3600:  "Atlantic/Azores",
	0:      "Europe/London",
	3600:   "Europe/Paris",
	7200:   "Europe/Helsinki",
	10800:  "Europe/Moscow",
	14400:  "Asia/Dubai",
	18000:  "Asia/Karachi",
	19800:  "Asia/Kolkata",
	20700:  "Asia/Katmandu",
	25200:  "Asia/Krasnoyarsk",
	28800:  "Asia/Shanghai",
	32400:  "Asia/Tokyo",
	36000:  "Australia/Melbourne",
	43200:  "Pacific/Auckland",
}

var fallbackMappingTimezoneToOffset = map[string]int64{
	"Africa/Abidjan":                 0,
	"Africa/Accra":                   0,
	"Africa/Addis_Ababa":             10800,
	"Africa/Algiers":                 3600,
	"Africa/Asmara":                  10800,
	"Africa/Bamako":                  0,
	"Africa/Bangui":                  3600,
	"Africa/Banjul":                  0,
	"Africa/Bissau":                  0,
	"Africa/Blantyre":                7200,
	"Africa/Brazzaville":             3600,
	"Africa/Bujumbura":               7200,
	"Africa/Cairo":                   7200,
	"Africa/Casablanca":              3600,
	"Africa/Ceuta":                   7200,
	"Africa/Conakry":                 0,
	"Africa/Dakar":                   0,
	"Africa/Dar_es_Salaam":           10800,
	"Africa/Djibouti":                10800,
	"Africa/Douala":                  3600,
	"Africa/El_Aaiun":                3600,
	"Africa/Freetown":                0,
	"Africa/Gaborone":                7200,
	"Africa/Harare":                  7200,
	"Africa/Johannesburg":            7200,
	"Africa/Juba":                    10800,
	"Africa/Kampala":                 10800,
	"Africa/Khartoum":                7200,
	"Africa/Kigali":                  7200,
	"Africa/Kinshasa":                3600,
	"Africa/Lagos":                   3600,
	"Africa/Libreville":              3600,
	"Africa/Lome":                    0,
	"Africa/Luanda":                  3600,
	"Africa/Lubumbashi":              7200,
	"Africa/Lusaka":                  7200,
	"Africa/Malabo":                  3600,
	"Africa/Maputo":                  7200,
	"Africa/Maseru":                  7200,
	"Africa/Mbabane":                 7200,
	"Africa/Mogadishu":               10800,
	"Africa/Monrovia":                0,
	"Africa/Nairobi":                 10800,
	"Africa/Ndjamena":                3600,
	"Africa/Niamey":                  3600,
	"Africa/Nouakchott":              0,
	"Africa/Ouagadougou":             0,
	"Africa/Porto-Novo":              3600,
	"Africa/Sao_Tome":                0,
	"Africa/Tripoli":                 7200,
	"Africa/Tunis":                   3600,
	"Africa/Windhoek":                7200,
	"America/Adak":                   -32400,
	"America/Anchorage":              -28800,
	"America/Anguilla":               -14400,
	"America/Antigua":                -14400,
	"America/Araguaina":              -10800,
	"America/Argentina/Buenos_Aires": -10800,
	"America/Argentina/Catamarca":    -10800,
	"America/Argentina/Cordoba":      -10800,
	"America/Argentina/Jujuy":        -10800,
	"America/Argentina/La_Rioja":     -10800,
	"America/Argentina/Mendoza":      -10800,
	"America/Argentina/Rio_Gallegos": -10800,
	"America/Argentina/Salta":        -10800,
	"America/Argentina/San_Juan":     -10800,
	"America/Argentina/San_Luis":     -10800,
	"America/Argentina/Tucuman":      -10800,
	"America/Argentina/Ushuaia":      -10800,
	"America/Aruba":                  -14400,
	"America/Asuncion":               -14400,
	"America/Atikokan":               -18000,
	"America/Bahia":                  -10800,
	"America/Bahia_Banderas":         -18000,
	"America/Barbados":               -14400,
	"America/Belem":                  -10800,
	"America/Belize":                 -21600,
	"America/Blanc-Sablon":           -14400,
	"America/Boa_Vista":              -14400,
	"America/Bogota":                 -18000,
	"America/Boise":                  -21600,
	"America/Cambridge_Bay":          -21600,
	"America/Campo_Grande":           -14400,
	"America/Cancun":                 -18000,
	"America/Caracas":                -14400,
	"America/Cayenne":                -10800,
	"America/Cayman":                 -18000,
	"America/Chicago":                -18000,
	"America/Chihuahua":              -21600,
	"America/Costa_Rica":             -21600,
	"America/Creston":                -25200,
	"America/Cuiaba":                 -14400,
	"America/Curacao":                -14400,
	"America/Danmarkshavn":           0,
	"America/Dawson":                 -25200,
	"America/Dawson_Creek":           -25200,
	"America/Denver":                 -21600,
	"America/Detroit":                -14400,
	"America/Dominica":               -14400,
	"America/Edmonton":               -21600,
	"America/Eirunepe":               -18000,
	"America/El_Salvador":            -21600,
	"America/Fort_Nelson":            -25200,
	"America/Fortaleza":              -10800,
	"America/Glace_Bay":              -10800,
	"America/Godthab":                -7200,
	"America/Goose_Bay":              -10800,
	"America/Grand_Turk":             -14400,
	"America/Grenada":                -14400,
	"America/Guadeloupe":             -14400,
	"America/Guatemala":              -21600,
	"America/Guayaquil":              -18000,
	"America/Guyana":                 -14400,
	"America/Halifax":                -10800,
	"America/Havana":                 -14400,
	"America/Hermosillo":             -25200,
	"America/Indiana/Indianapolis":   -14400,
	"America/Indiana/Knox":           -18000,
	"America/Indiana/Marengo":        -14400,
	"America/Indiana/Petersburg":     -14400,
	"America/Indiana/Tell_City":      -18000,
	"America/Indiana/Vevay":          -14400,
	"America/Indiana/Vincennes":      -14400,
	"America/Indiana/Winamac":        -14400,
	"America/Inuvik":                 -21600,
	"America/Iqaluit":                -14400,
	"America/Jamaica":                -18000,
	"America/Juneau":                 -28800,
	"America/Kentucky/Louisville":    -14400,
	"America/Kentucky/Monticello":    -14400,
	"America/Kralendijk":             -14400,
	"America/La_Paz":                 -14400,
	"America/Lima":                   -18000,
	"America/Los_Angeles":            -25200,
	"America/Lower_Princes":          -14400,
	"America/Maceio":                 -10800,
	"America/Managua":                -21600,
	"America/Manaus":                 -14400,
	"America/Marigot":                -14400,
	"America/Martinique":             -14400,
	"America/Matamoros":              -18000,
	"America/Mazatlan":               -21600,
	"America/Menominee":              -18000,
	"America/Merida":                 -18000,
	"America/Metlakatla":             -28800,
	"America/Mexico_City":            -18000,
	"America/Miquelon":               -7200,
	"America/Moncton":                -10800,
	"America/Monterrey":              -18000,
	"America/Montevideo":             -10800,
	"America/Montserrat":             -14400,
	"America/Nassau":                 -14400,
	"America/New_York":               -14400,
	"America/Nipigon":                -14400,
	"America/Nome":                   -28800,
	"America/Noronha":                -7200,
	"America/North_Dakota/Beulah":    -18000,
	"America/North_Dakota/Center":    -18000,
	"America/North_Dakota/New_Salem": -18000,
	"America/Ojinaga":                -21600,
	"America/Panama":                 -18000,
	"America/Pangnirtung":            -14400,
	"America/Paramaribo":             -10800,
	"America/Phoenix":                -25200,
	"America/Port-au-Prince":         -14400,
	"America/Port_of_Spain":          -14400,
	"America/Porto_Velho":            -14400,
	"America/Puerto_Rico":            -14400,
	"America/Punta_Arenas":           -10800,
	"America/Rainy_River":            -18000,
	"America/Rankin_Inlet":           -18000,
	"America/Recife":                 -10800,
	"America/Regina":                 -21600,
	"America/Resolute":               -18000,
	"America/Rio_Branco":             -18000,
	"America/Santarem":               -10800,
	"America/Santiago":               -14400,
	"America/Santo_Domingo":          -14400,
	"America/Sao_Paulo":              -10800,
	"America/Scoresbysund":           0,
	"America/Sitka":                  -28800,
	"America/St_Barthelemy":          -14400,
	"America/St_Johns":               -9000,
	"America/St_Kitts":               -14400,
	"America/St_Lucia":               -14400,
	"America/St_Thomas":              -14400,
	"America/St_Vincent":             -14400,
	"America/Swift_Current":          -21600,
	"America/Tegucigalpa":            -21600,
	"America/Thule":                  -10800,
	"America/Thunder_Bay":            -14400,
	"America/Tijuana":                -25200,
	"America/Toronto":                -14400,
	"America/Tortola":                -14400,
	"America/Vancouver":              -25200,
	"America/Whitehorse":             -25200,
	"America/Winnipeg":               -18000,
	"America/Yakutat":                -28800,
	"America/Yellowknife":            -21600,
	"Antarctica/Casey":               39600,
	"Antarctica/Davis":               25200,
	"Antarctica/DumontDUrville":      36000,
	"Antarctica/Macquarie":           39600,
	"Antarctica/Mawson":              18000,
	"Antarctica/McMurdo":             43200,
	"Antarctica/Palmer":              -10800,
	"Antarctica/Rothera":             -10800,
	"Antarctica/Syowa":               10800,
	"Antarctica/Troll":               7200,
	"Antarctica/Vostok":              21600,
	"Arctic/Longyearbyen":            7200,
	"Asia/Aden":                      10800,
	"Asia/Almaty":                    21600,
	"Asia/Amman":                     10800,
	"Asia/Anadyr":                    43200,
	"Asia/Aqtau":                     18000,
	"Asia/Aqtobe":                    18000,
	"Asia/Ashgabat":                  18000,
	"Asia/Atyrau":                    18000,
	"Asia/Baghdad":                   10800,
	"Asia/Bahrain":                   10800,
	"Asia/Baku":                      14400,
	"Asia/Bangkok":                   25200,
	"Asia/Barnaul":                   25200,
	"Asia/Beirut":                    10800,
	"Asia/Bishkek":                   21600,
	"Asia/Brunei":                    28800,
	"Asia/Chita":                     32400,
	"Asia/Choibalsan":                28800,
	"Asia/Colombo":                   19800,
	"Asia/Damascus":                  10800,
	"Asia/Dhaka":                     21600,
	"Asia/Dili":                      32400,
	"Asia/Dubai":                     14400,
	"Asia/Dushanbe":                  18000,
	"Asia/Famagusta":                 10800,
	"Asia/Gaza":                      10800,
	"Asia/Hebron":                    10800,
	"Asia/Ho_Chi_Minh":               25200,
	"Asia/Hong_Kong":                 28800,
	"Asia/Hovd":                      25200,
	"Asia/Irkutsk":                   28800,
	"Asia/Jakarta":                   25200,
	"Asia/Jayapura":                  32400,
	"Asia/Jerusalem":                 10800,
	"Asia/Kabul":                     16200,
	"Asia/Kamchatka":                 43200,
	"Asia/Karachi":                   18000,
	"Asia/Kathmandu":                 20700,
	"Asia/Khandyga":                  32400,
	"Asia/Kolkata":                   19800,
	"Asia/Krasnoyarsk":               25200,
	"Asia/Kuala_Lumpur":              28800,
	"Asia/Kuching":                   28800,
	"Asia/Kuwait":                    10800,
	"Asia/Macau":                     28800,
	"Asia/Magadan":                   39600,
	"Asia/Makassar":                  28800,
	"Asia/Manila":                    28800,
	"Asia/Muscat":                    14400,
	"Asia/Nicosia":                   10800,
	"Asia/Novokuznetsk":              25200,
	"Asia/Novosibirsk":               25200,
	"Asia/Omsk":                      21600,
	"Asia/Oral":                      18000,
	"Asia/Phnom_Penh":                25200,
	"Asia/Pontianak":                 25200,
	"Asia/Pyongyang":                 30600,
	"Asia/Qatar":                     10800,
	"Asia/Qyzylorda":                 21600,
	"Asia/Riyadh":                    10800,
	"Asia/Sakhalin":                  39600,
	"Asia/Samarkand":                 18000,
	"Asia/Seoul":                     32400,
	"Asia/Shanghai":                  28800,
	"Asia/Singapore":                 28800,
	"Asia/Srednekolymsk":             39600,
	"Asia/Taipei":                    28800,
	"Asia/Tashkent":                  18000,
	"Asia/Tbilisi":                   14400,
	"Asia/Tehran":                    16200,
	"Asia/Thimphu":                   21600,
	"Asia/Tokyo":                     32400,
	"Asia/Tomsk":                     25200,
	"Asia/Ulaanbaatar":               28800,
	"Asia/Urumqi":                    21600,
	"Asia/Ust-Nera":                  36000,
	"Asia/Vientiane":                 25200,
	"Asia/Vladivostok":               36000,
	"Asia/Yakutsk":                   32400,
	"Asia/Yangon":                    23400,
	"Asia/Yekaterinburg":             18000,
	"Asia/Yerevan":                   14400,
	"Atlantic/Azores":                0,
	"Atlantic/Bermuda":               -10800,
	"Atlantic/Canary":                3600,
	"Atlantic/Cape_Verde":            -3600,
	"Atlantic/Faroe":                 3600,
	"Atlantic/Madeira":               3600,
	"Atlantic/Reykjavik":             0,
	"Atlantic/South_Georgia":         -7200,
	"Atlantic/St_Helena":             0,
	"Atlantic/Stanley":               -10800,
	"Australia/Adelaide":             34200,
	"Australia/Brisbane":             36000,
	"Australia/Broken_Hill":          34200,
	"Australia/Currie":               36000,
	"Australia/Darwin":               34200,
	"Australia/Eucla":                31500,
	"Australia/Hobart":               36000,
	"Australia/Lindeman":             36000,
	"Australia/Lord_Howe":            37800,
	"Australia/Melbourne":            36000,
	"Australia/Perth":                28800,
	"Australia/Sydney":               36000,
	"Europe/Amsterdam":               7200,
	"Europe/Andorra":                 7200,
	"Europe/Astrakhan":               14400,
	"Europe/Athens":                  10800,
	"Europe/Belgrade":                7200,
	"Europe/Berlin":                  7200,
	"Europe/Bratislava":              7200,
	"Europe/Brussels":                7200,
	"Europe/Bucharest":               10800,
	"Europe/Budapest":                7200,
	"Europe/Busingen":                7200,
	"Europe/Chisinau":                10800,
	"Europe/Copenhagen":              7200,
	"Europe/Dublin":                  3600,
	"Europe/Gibraltar":               7200,
	"Europe/Guernsey":                3600,
	"Europe/Helsinki":                10800,
	"Europe/Isle_of_Man":             3600,
	"Europe/Istanbul":                10800,
	"Europe/Jersey":                  3600,
	"Europe/Kaliningrad":             7200,
	"Europe/Kiev":                    10800,
	"Europe/Kirov":                   10800,
	"Europe/Lisbon":                  3600,
	"Europe/Ljubljana":               7200,
	"Europe/London":                  3600,
	"Europe/Luxembourg":              7200,
	"Europe/Madrid":                  7200,
	"Europe/Malta":                   7200,
	"Europe/Mariehamn":               10800,
	"Europe/Minsk":                   10800,
	"Europe/Monaco":                  7200,
	"Europe/Moscow":                  10800,
	"Europe/Oslo":                    7200,
	"Europe/Paris":                   7200,
	"Europe/Podgorica":               7200,
	"Europe/Prague":                  7200,
	"Europe/Riga":                    10800,
	"Europe/Rome":                    7200,
	"Europe/Samara":                  14400,
	"Europe/San_Marino":              7200,
	"Europe/Sarajevo":                7200,
	"Europe/Saratov":                 14400,
	"Europe/Simferopol":              10800,
	"Europe/Skopje":                  7200,
	"Europe/Sofia":                   10800,
	"Europe/Stockholm":               7200,
	"Europe/Tallinn":                 10800,
	"Europe/Tirane":                  7200,
	"Europe/Ulyanovsk":               14400,
	"Europe/Uzhgorod":                10800,
	"Europe/Vaduz":                   7200,
	"Europe/Vatican":                 7200,
	"Europe/Vienna":                  7200,
	"Europe/Vilnius":                 10800,
	"Europe/Volgograd":               10800,
	"Europe/Warsaw":                  7200,
	"Europe/Zagreb":                  7200,
	"Europe/Zaporozhye":              10800,
	"Europe/Zurich":                  7200,
	"Indian/Antananarivo":            10800,
	"Indian/Chagos":                  21600,
	"Indian/Christmas":               25200,
	"Indian/Cocos":                   23400,
	"Indian/Comoro":                  10800,
	"Indian/Kerguelen":               18000,
	"Indian/Mahe":                    14400,
	"Indian/Maldives":                18000,
	"Indian/Mauritius":               14400,
	"Indian/Mayotte":                 10800,
	"Indian/Reunion":                 14400,
	"Pacific/Apia":                   46800,
	"Pacific/Auckland":               43200,
	"Pacific/Bougainville":           39600,
	"Pacific/Chatham":                45900,
	"Pacific/Chuuk":                  36000,
	"Pacific/Easter":                 -21600,
	"Pacific/Efate":                  39600,
	"Pacific/Enderbury":              46800,
	"Pacific/Fakaofo":                46800,
	"Pacific/Fiji":                   43200,
	"Pacific/Funafuti":               43200,
	"Pacific/Galapagos":              -21600,
	"Pacific/Gambier":                -32400,
	"Pacific/Guadalcanal":            39600,
	"Pacific/Guam":                   36000,
	"Pacific/Honolulu":               -36000,
	"Pacific/Kiritimati":             50400,
	"Pacific/Kosrae":                 39600,
	"Pacific/Kwajalein":              43200,
	"Pacific/Majuro":                 43200,
	"Pacific/Marquesas":              -34200,
	"Pacific/Midway":                 -39600,
	"Pacific/Nauru":                  43200,
	"Pacific/Niue":                   -39600,
	"Pacific/Norfolk":                39600,
	"Pacific/Noumea":                 39600,
	"Pacific/Pago_Pago":              -39600,
	"Pacific/Palau":                  32400,
	"Pacific/Pitcairn":               -28800,
	"Pacific/Pohnpei":                39600,
	"Pacific/Port_Moresby":           36000,
	"Pacific/Rarotonga":              -36000,
	"Pacific/Saipan":                 36000,
	"Pacific/Tahiti":                 -36000,
	"Pacific/Tarawa":                 43200,
	"Pacific/Tongatapu":              46800,
	"Pacific/Wake":                   43200,
	"Pacific/Wallis":                 43200,
	"UTC":                            0,
}

// data get from function DateTimeZone::listIdentifiers(\DateTimeZone::PER_COUNTRY, $countryCode) in PHP
var mappingCountryCodeToTimezone = map[string][]string{
	"BD": {"Asia/Dhaka"},
	"BE": {"Europe/Brussels"},
	"BF": {"Africa/Ouagadougou"},
	"BG": {"Europe/Sofia"},
	"BA": {"Europe/Sarajevo"},
	"BB": {"America/Barbados"},
	"WF": {"Pacific/Wallis"},
	"BL": {"America/St_Barthelemy"},
	"BM": {"Atlantic/Bermuda"},
	"BN": {"Asia/Brunei"},
	"BO": {"America/La_Paz"},
	"BH": {"Asia/Bahrain"},
	"BI": {"Africa/Bujumbura"},
	"BJ": {"Africa/Porto-Novo"},
	"BT": {"Asia/Thimphu"},
	"JM": {"America/Jamaica"},
	"BV": {},
	"BW": {"Africa/Gaborone"},
	"WS": {"Pacific/Apia"},
	"BQ": {"America/Kralendijk"},
	"BR": {"America/Araguaina", "America/Bahia", "America/Belem", "America/Boa_Vista", "America/Campo_Grande", "America/Cuiaba", "America/Eirunepe", "America/Fortaleza", "America/Maceio", "America/Manaus", "America/Noronha", "America/Porto_Velho", "America/Recife", "America/Rio_Branco", "America/Santarem", "America/Sao_Paulo"},
	"BS": {"America/Nassau"},
	"JE": {"Europe/Jersey"},
	"BY": {"Europe/Minsk"},
	"BZ": {"America/Belize"},
	"RU": {"Asia/Anadyr", "Asia/Barnaul", "Asia/Chita", "Asia/Irkutsk", "Asia/Kamchatka", "Asia/Khandyga", "Asia/Krasnoyarsk", "Asia/Magadan", "Asia/Novokuznetsk", "Asia/Novosibirsk", "Asia/Omsk", "Asia/Sakhalin", "Asia/Srednekolymsk", "Asia/Tomsk", "Asia/Ust-Nera", "Asia/Vladivostok", "Asia/Yakutsk", "Asia/Yekaterinburg", "Europe/Astrakhan", "Europe/Kaliningrad", "Europe/Kirov", "Europe/Moscow", "Europe/Samara", "Europe/Saratov", "Europe/Simferopol", "Europe/Ulyanovsk", "Europe/Volgograd"},
	"RW": {"Africa/Kigali"},
	"RS": {"Europe/Belgrade"},
	"TL": {"Asia/Dili"},
	"RE": {"Indian/Reunion"},
	"TM": {"Asia/Ashgabat"},
	"TJ": {"Asia/Dushanbe"},
	"RO": {"Europe/Bucharest"},
	"TK": {"Pacific/Fakaofo"},
	"GW": {"Africa/Bissau"},
	"GU": {"Pacific/Guam"},
	"GT": {"America/Guatemala"},
	"GS": {"Atlantic/South_Georgia"},
	"GR": {"Europe/Athens"},
	"GQ": {"Africa/Malabo"},
	"GP": {"America/Guadeloupe"},
	"JP": {"Asia/Tokyo"},
	"GY": {"America/Guyana"},
	"GG": {"Europe/Guernsey"},
	"GF": {"America/Cayenne"},
	"GE": {"Asia/Tbilisi"},
	"GD": {"America/Grenada"},
	"GB": {"Europe/London"},
	"GA": {"Africa/Libreville"},
	"SV": {"America/El_Salvador"},
	"GN": {"Africa/Conakry"},
	"GM": {"Africa/Banjul"},
	"GL": {"America/Danmarkshavn", "America/Godthab", "America/Scoresbysund", "America/Thule"},
	"GI": {"Europe/Gibraltar"},
	"GH": {"Africa/Accra"},
	"OM": {"Asia/Muscat"},
	"TN": {"Africa/Tunis"},
	"JO": {"Asia/Amman"},
	"HR": {"Europe/Zagreb"},
	"HT": {"America/Port-au-Prince"},
	"HU": {"Europe/Budapest"},
	"HK": {"Asia/Hong_Kong"},
	"HN": {"America/Tegucigalpa"},
	"HM": {},
	"VE": {"America/Caracas"},
	"PR": {"America/Puerto_Rico"},
	"PS": {"Asia/Gaza", "Asia/Hebron"},
	"PW": {"Pacific/Palau"},
	"PT": {"Atlantic/Azores", "Atlantic/Madeira", "Europe/Lisbon"},
	"SJ": {"Arctic/Longyearbyen"},
	"PY": {"America/Asuncion"},
	"IQ": {"Asia/Baghdad"},
	"PA": {"America/Panama"},
	"PF": {"Pacific/Gambier", "Pacific/Marquesas", "Pacific/Tahiti"},
	"PG": {"Pacific/Bougainville", "Pacific/Port_Moresby"},
	"PE": {"America/Lima"},
	"PK": {"Asia/Karachi"},
	"PH": {"Asia/Manila"},
	"PN": {"Pacific/Pitcairn"},
	"PL": {"Europe/Warsaw"},
	"PM": {"America/Miquelon"},
	"ZM": {"Africa/Lusaka"},
	"EH": {"Africa/El_Aaiun"},
	"EE": {"Europe/Tallinn"},
	"EG": {"Africa/Cairo"},
	"ZA": {"Africa/Johannesburg"},
	"EC": {"America/Guayaquil", "Pacific/Galapagos"},
	"IT": {"Europe/Rome"},
	"VN": {"Asia/Ho_Chi_Minh"},
	"SB": {"Pacific/Guadalcanal"},
	"ET": {"Africa/Addis_Ababa"},
	"SO": {"Africa/Mogadishu"},
	"ZW": {"Africa/Harare"},
	"SA": {"Asia/Riyadh"},
	"ES": {"Africa/Ceuta", "Atlantic/Canary", "Europe/Madrid"},
	"ER": {"Africa/Asmara"},
	"ME": {"Europe/Podgorica"},
	"MD": {"Europe/Chisinau"},
	"MG": {"Indian/Antananarivo"},
	"MF": {"America/Marigot"},
	"MA": {"Africa/Casablanca"},
	"MC": {"Europe/Monaco"},
	"UZ": {"Asia/Samarkand", "Asia/Tashkent"},
	"MM": {"Asia/Yangon"},
	"ML": {"Africa/Bamako"},
	"MO": {"Asia/Macau"},
	"MN": {"Asia/Choibalsan", "Asia/Hovd", "Asia/Ulaanbaatar"},
	"MH": {"Pacific/Kwajalein", "Pacific/Majuro"},
	"MK": {"Europe/Skopje"},
	"MU": {"Indian/Mauritius"},
	"MT": {"Europe/Malta"},
	"MW": {"Africa/Blantyre"},
	"MV": {"Indian/Maldives"},
	"MQ": {"America/Martinique"},
	"MP": {"Pacific/Saipan"},
	"MS": {"America/Montserrat"},
	"MR": {"Africa/Nouakchott"},
	"IM": {"Europe/Isle_of_Man"},
	"UG": {"Africa/Kampala"},
	"TZ": {"Africa/Dar_es_Salaam"},
	"MY": {"Asia/Kuala_Lumpur", "Asia/Kuching"},
	"MX": {"America/Bahia_Banderas", "America/Cancun", "America/Chihuahua", "America/Hermosillo", "America/Matamoros", "America/Mazatlan", "America/Merida", "America/Mexico_City", "America/Monterrey", "America/Ojinaga", "America/Tijuana"},
	"IL": {"Asia/Jerusalem"},
	"FR": {"Europe/Paris"},
	"IO": {"Indian/Chagos"},
	"SH": {"Atlantic/St_Helena"},
	"FI": {"Europe/Helsinki"},
	"FJ": {"Pacific/Fiji"},
	"FK": {"Atlantic/Stanley"},
	"FM": {"Pacific/Chuuk", "Pacific/Kosrae", "Pacific/Pohnpei"},
	"FO": {"Atlantic/Faroe"},
	"NI": {"America/Managua"},
	"NL": {"Europe/Amsterdam"},
	"NO": {"Europe/Oslo"},
	"NA": {"Africa/Windhoek"},
	"VU": {"Pacific/Efate"},
	"NC": {"Pacific/Noumea"},
	"NE": {"Africa/Niamey"},
	"NF": {"Pacific/Norfolk"},
	"NG": {"Africa/Lagos"},
	"NZ": {"Pacific/Auckland", "Pacific/Chatham"},
	"NP": {"Asia/Kathmandu"},
	"NR": {"Pacific/Nauru"},
	"NU": {"Pacific/Niue"},
	"CK": {"Pacific/Rarotonga"},
	"XK": {},
	"CI": {"Africa/Abidjan"},
	"CH": {"Europe/Zurich"},
	"CO": {"America/Bogota"},
	"CN": {"Asia/Shanghai", "Asia/Urumqi"},
	"CM": {"Africa/Douala"},
	"CL": {"America/Punta_Arenas", "America/Santiago", "Pacific/Easter"},
	"CC": {"Indian/Cocos"},
	"CA": {"America/Atikokan", "America/Blanc-Sablon", "America/Cambridge_Bay", "America/Creston", "America/Dawson", "America/Dawson_Creek", "America/Edmonton", "America/Fort_Nelson", "America/Glace_Bay", "America/Goose_Bay", "America/Halifax", "America/Inuvik", "America/Iqaluit", "America/Moncton", "America/Nipigon", "America/Pangnirtung", "America/Rainy_River", "America/Rankin_Inlet", "America/Regina", "America/Resolute", "America/St_Johns", "America/Swift_Current", "America/Thunder_Bay", "America/Toronto", "America/Vancouver", "America/Whitehorse", "America/Winnipeg", "America/Yellowknife"},
	"CG": {"Africa/Brazzaville"},
	"CF": {"Africa/Bangui"},
	"CD": {"Africa/Kinshasa", "Africa/Lubumbashi"},
	"CZ": {"Europe/Prague"},
	"CY": {"Asia/Famagusta", "Asia/Nicosia"},
	"CX": {"Indian/Christmas"},
	"CR": {"America/Costa_Rica"},
	"CW": {"America/Curacao"},
	"CV": {"Atlantic/Cape_Verde"},
	"CU": {"America/Havana"},
	"SZ": {"Africa/Mbabane"},
	"SY": {"Asia/Damascus"},
	"SX": {"America/Lower_Princes"},
	"KG": {"Asia/Bishkek"},
	"KE": {"Africa/Nairobi"},
	"SS": {"Africa/Juba"},
	"SR": {"America/Paramaribo"},
	"KI": {"Pacific/Enderbury", "Pacific/Kiritimati", "Pacific/Tarawa"},
	"KH": {"Asia/Phnom_Penh"},
	"KN": {"America/St_Kitts"},
	"KM": {"Indian/Comoro"},
	"ST": {"Africa/Sao_Tome"},
	"SK": {"Europe/Bratislava"},
	"KR": {"Asia/Seoul"},
	"SI": {"Europe/Ljubljana"},
	"KP": {"Asia/Pyongyang"},
	"KW": {"Asia/Kuwait"},
	"SN": {"Africa/Dakar"},
	"SM": {"Europe/San_Marino"},
	"SL": {"Africa/Freetown"},
	"SC": {"Indian/Mahe"},
	"KZ": {"Asia/Almaty", "Asia/Aqtau", "Asia/Aqtobe", "Asia/Atyrau", "Asia/Oral", "Asia/Qyzylorda"},
	"KY": {"America/Cayman"},
	"SG": {"Asia/Singapore"},
	"SE": {"Europe/Stockholm"},
	"SD": {"Africa/Khartoum"},
	"DO": {"America/Santo_Domingo"},
	"DM": {"America/Dominica"},
	"DJ": {"Africa/Djibouti"},
	"DK": {"Europe/Copenhagen"},
	"VG": {"America/Tortola"},
	"DE": {"Europe/Berlin", "Europe/Busingen"},
	"YE": {"Asia/Aden"},
	"DZ": {"Africa/Algiers"},
	"US": {"America/Adak", "America/Anchorage", "America/Boise", "America/Chicago", "America/Denver", "America/Detroit", "America/Indiana/Indianapolis", "America/Indiana/Knox", "America/Indiana/Marengo", "America/Indiana/Petersburg", "America/Indiana/Tell_City", "America/Indiana/Vevay", "America/Indiana/Vincennes", "America/Indiana/Winamac", "America/Juneau", "America/Kentucky/Louisville", "America/Kentucky/Monticello", "America/Los_Angeles", "America/Menominee", "America/Metlakatla", "America/New_York", "America/Nome", "America/North_Dakota/Beulah", "America/North_Dakota/Center", "America/North_Dakota/New_Salem", "America/Phoenix", "America/Sitka", "America/Yakutat", "Pacific/Honolulu"},
	"UY": {"America/Montevideo"},
	"YT": {"Indian/Mayotte"},
	"UM": {"Pacific/Midway", "Pacific/Wake"},
	"LB": {"Asia/Beirut"},
	"LC": {"America/St_Lucia"},
	"LA": {"Asia/Vientiane"},
	"TV": {"Pacific/Funafuti"},
	"TW": {"Asia/Taipei"},
	"TT": {"America/Port_of_Spain"},
	"TR": {"Europe/Istanbul"},
	"LK": {"Asia/Colombo"},
	"LI": {"Europe/Vaduz"},
	"LV": {"Europe/Riga"},
	"TO": {"Pacific/Tongatapu"},
	"LT": {"Europe/Vilnius"},
	"LU": {"Europe/Luxembourg"},
	"LR": {"Africa/Monrovia"},
	"LS": {"Africa/Maseru"},
	"TH": {"Asia/Bangkok"},
	"TF": {"Indian/Kerguelen"},
	"TG": {"Africa/Lome"},
	"TD": {"Africa/Ndjamena"},
	"TC": {"America/Grand_Turk"},
	"LY": {"Africa/Tripoli"},
	"VA": {"Europe/Vatican"},
	"VC": {"America/St_Vincent"},
	"AE": {"Asia/Dubai"},
	"AD": {"Europe/Andorra"},
	"AG": {"America/Antigua"},
	"AF": {"Asia/Kabul"},
	"AI": {"America/Anguilla"},
	"VI": {"America/St_Thomas"},
	"IS": {"Atlantic/Reykjavik"},
	"IR": {"Asia/Tehran"},
	"AM": {"Asia/Yerevan"},
	"AL": {"Europe/Tirane"},
	"AO": {"Africa/Luanda"},
	"AQ": {"Antarctica/Casey", "Antarctica/Davis", "Antarctica/DumontDUrville", "Antarctica/Mawson", "Antarctica/McMurdo", "Antarctica/Palmer", "Antarctica/Rothera", "Antarctica/Syowa", "Antarctica/Troll", "Antarctica/Vostok"},
	"AS": {"Pacific/Pago_Pago"},
	"AR": {"America/Argentina/Buenos_Aires", "America/Argentina/Catamarca", "America/Argentina/Cordoba", "America/Argentina/Jujuy", "America/Argentina/La_Rioja", "America/Argentina/Mendoza", "America/Argentina/Rio_Gallegos", "America/Argentina/Salta", "America/Argentina/San_Juan", "America/Argentina/San_Luis", "America/Argentina/Tucuman", "America/Argentina/Ushuaia"},
	"AU": {"Antarctica/Macquarie", "Australia/Adelaide", "Australia/Brisbane", "Australia/Broken_Hill", "Australia/Currie", "Australia/Darwin", "Australia/Eucla", "Australia/Hobart", "Australia/Lindeman", "Australia/Lord_Howe", "Australia/Melbourne", "Australia/Perth", "Australia/Sydney"},
	"AT": {"Europe/Vienna"},
	"AW": {"America/Aruba"},
	"IN": {"Asia/Kolkata"},
	"AX": {"Europe/Mariehamn"},
	"AZ": {"Asia/Baku"},
	"IE": {"Europe/Dublin"},
	"ID": {"Asia/Jakarta", "Asia/Jayapura", "Asia/Makassar", "Asia/Pontianak"},
	"UA": {"Europe/Kiev", "Europe/Uzhgorod", "Europe/Zaporozhye"},
	"QA": {"Asia/Qatar"},
	"MZ": {"Africa/Maputo"},
}

var mappingTimezone = map[string]string{
	"GMT-01:00": "Etc/GMT+1",
	"GMT-02:00": "Etc/GMT+2",
	"GMT-03:00": "Etc/GMT+3",
	"GMT-03:30": "America/St_Johns",
	"GMT-04:00": "Etc/GMT+4",
	"GMT-05:00": "Etc/GMT+5",
	"GMT-06:00": "Etc/GMT+6",
	"GMT-07:00": "Etc/GMT+7",
	"GMT-08:00": "Etc/GMT+8",
	"GMT-09:00": "Etc/GMT+9",
	"GMT-09:30": "Pacific/Marquesas",
	"GMT-10:00": "Etc/GMT+10",
	"GMT-11:00": "Etc/GMT+11",
	"GMT-12:00": "Etc/GMT+12",
	"GMT+00:00": "Etc/GMT",
	"GMT+01:00": "Etc/GMT-1",
	"GMT+02:00": "Etc/GMT-2",
	"GMT+03:00": "Etc/GMT-3",
	"GMT+03:30": "Asia/Tehran",
	"GMT+04:00": "Etc/GMT-4",
	"GMT+04:30": "Asia/Kabul",
	"GMT+05:00": "Etc/GMT-5",
	"GMT+05:30": "Asia/Colombo",
	"GMT+05:45": "Asia/Kathmandu",
	"GMT+06:00": "Etc/GMT-6",
	"GMT+06:30": "Indian/Cocos",
	"GMT+07:00": "Etc/GMT-7",
	"GMT+08:00": "Etc/GMT-8",
	"GMT+09:00": "Etc/GMT-9",
	"GMT+09:30": "Australia/Adelaide",
	"GMT+10:00": "Etc/GMT-10",
	"GMT+11:00": "Etc/GMT-11",
	"GMT+12:00": "Etc/GMT-12",
	"GMT+12:45": "Pacific/Chatham",
	"GMT+13:00": "Etc/GMT-13",
	"GMT+14:00": "Etc/GMT-14",
	"UTC-03:00": "Etc/GMT+3",
	"UTC-04:00": "Etc/GMT+4",
	"UTC-05:00": "Etc/GMT+5",
	"UTC-06:00": "Etc/GMT+6",
	"UTC-07:00": "Etc/GMT+7",
	"UTC-08:00": "Etc/GMT+8",
	"UTC-09:00": "Etc/GMT+9",
	"UTC-10:00": "Etc/GMT+10",
	"UTC-11:00": "Etc/GMT+11",
	"UTC-12:00": "Etc/GMT+12",
	"UTC":       "Etc/GMT",
	"UTC+01:00": "Etc/GMT-1",
	"UTC+02:00": "Etc/GMT-2",
	"UTC+03:00": "Etc/GMT-3",
	"UTC+03:30": "Asia/Tehran",
	"UTC+04:00": "Etc/GMT-4",
	"UTC+05:00": "Etc/GMT-5",
	"UTC+05:30": "Asia/Colombo",
	"UTC+06:00": "Etc/GMT-6",
	"UTC+06:30": "Indian/Cocos",
	"UTC+07:00": "Etc/GMT-7",
	"UTC+08:00": "Etc/GMT-8",
	"UTC+09:00": "Etc/GMT-9",
	"UTC+10:00": "Etc/GMT-10",
	"UTC+11:00": "Etc/GMT-11",
	"UTC+12:00": "Etc/GMT-12",
}

var timezoneLocationMapping = make(map[string]time.Location)

func GetListSupportedTimezone() []string {
	return listSupportedTimezones
}

func IsSupportTimezone(timezone string) bool {
	for _, tz := range listSupportedTimezones {
		if tz == timezone {
			return true
		}
	}
	return false
}

func GetListTimezoneFromCountryCode(countryCode string) []string {
	return mappingCountryCodeToTimezone[countryCode]
}

func GetFirstTimezoneFromCountryCode(countryCode string) string {
	countryCode = strings.ToUpper(countryCode)
	listTimezones, ok := mappingCountryCodeToTimezone[countryCode]
	if ok && len(listTimezones) > 0 {
		return listTimezones[0]
	} else {
		return ""
	}
}

func GetEquivalentShopifyTimezone(timezone string) string {
	if offset, exists := fallbackMappingTimezoneToOffset[timezone]; exists {
		for _, stz := range standardTimezoneOfShopify {
			if sOffset, exists := fallbackMappingTimezoneToOffset[stz]; exists {
				if sOffset == offset {
					return stz
				}
			}
		}
	}
	return ""
}

func GetEquivalentShopifyTimezoneFromCountryCode(countryCode string) string {
	listTzs := GetListTimezoneFromCountryCode(countryCode)
	for _, tz := range listTzs {
		shopifyTz := GetEquivalentShopifyTimezone(tz)
		if shopifyTz != "" {
			return shopifyTz
		}
	}
	return ""
}

// input example: "-07:00"
// output example: "Asia/Ho_Chi_Minh"
func GetTimezoneFromOffsetString(offset string) (string, error) {
	parseStr := strings.Split(offset, ":")
	if len(parseStr) < 2 {
		return "", fmt.Errorf("Invalid format of offset string")
	}
	hour, _ := strconv.ParseInt(parseStr[0], 10, 64)
	minute, _ := strconv.ParseInt(parseStr[1], 10, 64)
	offsetNumber := hour*60*60 + minute*60

	// use standard timezone offset
	for k, v := range standardOffsetToTimezone {
		if k == offsetNumber {
			return v, nil
		}
	}
	// use fallback with timezone DST
	for k, v := range fallbackMappingTimezoneToOffset {
		if v == offsetNumber {
			return k, nil
		}
	}
	return "", fmt.Errorf("Not found timezone matching with this offset")
}

// input examples: "(GMT-08:00) Los_Angeles", "(UTC+05:00) Islamabad, Karachi", "(GMT+11:00) New Caledonia"
// output example: "America/Los_Angeles"
func ParseTimezoneFromTimezoneString(tzString string) (string, error) {
	// handling for standard format "Asia/Ho_Chi_Minh"
	if IsSupportTimezone(tzString) {
		return tzString, nil
	}

	// handling for format "(GMT-08:00) Los_Angeles"
	re := regexp.MustCompile("\\(GMT(.*?)\\)")
	result := re.FindStringSubmatch(tzString)
	if len(result) >= 2 {
		offsetString := "00:00"
		if len(result[1]) != 0 {
			offsetString = result[1]
		}
		return GetTimezoneFromOffsetString(offsetString)
	}

	// handling for format "(UTC-08:00) Pacific Time (US & Canada)"
	re = regexp.MustCompile("\\(UTC(.*?)\\)")
	result = re.FindStringSubmatch(tzString)
	if len(result) >= 2 {
		offsetString := "00:00"
		if len(result[1]) != 0 {
			offsetString = result[1]
		}
		return GetTimezoneFromOffsetString(offsetString)
	}

	// handling for format "Etc/GMT+5", "Etc/GMT"
	re = regexp.MustCompile("Etc/GMT(.*)")
	result = re.FindStringSubmatch(tzString)
	if len(result) >= 2 {
		offsetString := "00:00"
		if len(result[1]) > 0 {
			hourInNumber, err := strconv.ParseInt(result[1], 10, 64)
			if err != nil {
				logger.BkLog.Errorw(fmt.Sprintf("Error when parse timezone: %v", err), "timezone", result[1])
				return "", err
			}
			hourInNumber = -hourInNumber
			offsetString = fmt.Sprintf("%v", hourInNumber) + ":00"
		}
		return GetTimezoneFromOffsetString(offsetString)
	}

	// not matching with any format
	return "", fmt.Errorf("not found")
}

func GetLocationByTimezone(timezone string, defaultTimezone string) (location *time.Location, err error) {
	if strings.Contains(timezone, "GMT") {
		timezone, err = ParseTimezoneFromTimezoneString(timezone)
		if err != nil {
			logger.BkLog.Errorw(fmt.Sprintf("Cannot parse timezone: %v", err), "timezone", timezone)
			timezone = defaultTimezone
		}
	}
	if strings.Contains(timezone, "UTC") {
		timezone, err = ParseTimezoneFromTimezoneString(timezone)
		if err != nil {
			logger.BkLog.Errorw(fmt.Sprintf("Cannot parse timezone: %v", err), "timezone", timezone)
			timezone = defaultTimezone
		}
	}
	if location, ok := timezoneLocationMapping[timezone]; ok {
		logger.BkLog.Infof("Get %v from cache", timezone)
		return &location, nil
	}
	logger.BkLog.Infof("GET %v from disk", timezone)

	location, err = time.LoadLocation(timezone)
	if err != nil {
		logger.BkLog.Errorw(fmt.Sprintf("Error during load location with timezone: %v", err), "timezone", timezone)
		return
	}

	timezoneLocationMapping[timezone] = *location
	return
}

func GetFormattedShopTimeZone(timeZone string) string {
	var validGMT = regexp.MustCompile(`(GMT[+-]\d\d:\d\d)`)
	gmtString := validGMT.FindString(timeZone)
	if gmtString != "" {
		if formattedTimeZone, ok := mappingTimezone[gmtString]; ok {
			return formattedTimeZone
		}
	}
	var validUDT = regexp.MustCompile(`(UDT[+-]\d\d:\d\d)`)
	udtString := validUDT.FindString(timeZone)
	if udtString != "" {
		if formattedTimeZone, ok := mappingTimezone[udtString]; ok {
			return formattedTimeZone
		}
	}
	return timeZone
}
